app:
    build: .
    command: python -m flask run --host 0.0.0.0 --port 5000
    volumes:
        - .:/var/www/flask-bones
    ports:
        - "5000:5000"
    links:
        - db
        - redis
        - memcached
        - mail
    env_file: .env
    environment:
        - FLASK_DEBUG=True
        - FLASK_APP=serve.py
celery:
    build: .
    command: make celery
    volumes:
        - .:/var/www/flask-bones
    links:
        - db
        - redis
        - memcached
        - mail
    env_file: .env
db:
    image: postgres:9.4.4
    ports:
        - "5432:5432"
redis:
    image: redis:2.8.17
    ports:
        - "6379:6379"
mail:
    image: mailhog/mailhog
    ports:
        - "8025:8025"
memcached:
    image: memcached:1.4.24
    ports:
        - "11211:11211"
